import{r as e,j as t,l as a,U as s,L as r,T as o,a as l}from"./index-Bg1WC_Fo.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";import"./react-vendor-B_uAldPx.js";const i=({onFileUpload:i,error:n,history:c,onLoadFromHistory:d,onClearHistory:x,onLogout:m})=>{const[g,p]=e.useState(!1),[b,h]=e.useState(!1),f=()=>{const e=(()=>{const e=l();return e?btoa(`${e.githubPAT}:::${e.geminiApiKey}`):""})();navigator.clipboard.writeText(e),alert("Quick login code copied! You can now paste this on another device to log in quickly.")},u=e.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p(!0)},[]),j=e.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p(!1)},[]),y=e.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),N=e.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(i(e.dataTransfer.files[0]),e.dataTransfer.clearData())},[i]);return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900",children:[m&&t.jsxs("div",{className:"hidden md:flex absolute top-4 right-4 gap-2",children:[t.jsx("button",{onClick:f,className:"text-xs px-3 py-1 bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 rounded transition-colors",title:"Copy quick login code",children:"Copy Login Code"}),t.jsx("button",{onClick:m,className:"text-sm text-gray-400 hover:text-amber-400 transition-colors",children:"Logout"})]}),t.jsxs("div",{className:"max-w-4xl w-full p-8 space-y-12 flex-1 flex flex-col justify-center",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("img",{src:a,alt:"Saga Logo",className:"w-24 h-24"})}),t.jsx("h1",{className:"text-5xl font-extrabold text-white sm:text-6xl md:text-7xl mb-3 tracking-wide",children:t.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 via-orange-400 to-amber-500",children:"Saga"})}),t.jsx("p",{className:"text-xl text-amber-400/80 mb-2 font-semibold tracking-wider",children:"Your Story Companion"}),t.jsxs("p",{className:"text-base text-gray-400 mb-8 max-w-lg mx-auto",children:["Upload a book as ",t.jsx("code",{className:"bg-gray-800/50 text-amber-400/90 rounded px-2 py-0.5 text-sm",children:".txt"})," or ",t.jsx("code",{className:"bg-gray-800/50 text-amber-400/90 rounded px-2 py-0.5 text-sm",children:".epub"})," to generate chapter summaries"]}),t.jsxs("label",{onDragEnter:u,onDragLeave:j,onDragOver:y,onDrop:N,className:"relative block w-full rounded-lg border-2 border-dashed p-12 text-center hover:border-amber-500/50 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 focus:ring-offset-gray-900 cursor-pointer transition-colors "+(g?"border-amber-500 bg-gray-800/50":"border-gray-600"),children:[t.jsx(s,{className:"mx-auto h-12 w-12 text-gray-500"}),t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-300",children:g?"Drop the file here":"Drag & Drop a file or click to upload"}),t.jsx("input",{id:"file-upload",name:"file-upload",type:"file",accept:".txt,.epub",className:"sr-only",onChange:e=>{e.target.files&&e.target.files.length>0&&i(e.target.files[0])}})]}),n&&t.jsxs("div",{className:"mt-6 bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg relative",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Oh no! "}),t.jsx("span",{className:"block sm:inline",children:n})]})]}),c.length>0&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(r,{className:"w-8 h-8 text-amber-400"}),t.jsx("h2",{className:"text-3xl font-bold text-white",children:"My Library"})]}),t.jsxs("button",{onClick:x,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-red-400 transition-colors",children:[t.jsx(o,{className:"w-4 h-4"}),"Clear History"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>t.jsxs("button",{onClick:()=>d(e.id),className:"bg-gray-800/50 p-4 rounded-lg text-left hover:bg-gray-700/50 transform hover:-translate-y-1 transition-all shadow-lg",children:[t.jsx("h3",{className:"font-bold text-lg text-gray-100 truncate",children:e.title}),t.jsxs("p",{className:"text-sm text-gray-400",children:[e.chapters.length," chapters"]})]},e.id))})]})]}),m&&t.jsxs("div",{className:"md:hidden w-full p-4 border-t border-gray-800 flex justify-center gap-4",children:[t.jsx("button",{onClick:f,className:"text-xs px-3 py-2 bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 rounded transition-colors",title:"Copy quick login code",children:"Copy Login Code"}),t.jsx("button",{onClick:m,className:"text-sm px-3 py-2 text-gray-400 hover:text-amber-400 transition-colors",children:"Logout"})]})]})};export{i as default};
